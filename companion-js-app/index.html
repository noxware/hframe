<!DOCTYPE html>
<html>
  <body>
    <script type="module">
      import { h, Component, render } from "https://esm.sh/preact@10.23.2";
      import { useState, useEffect } from "https://esm.sh/preact@10.23.2/hooks";

      function App() {
        const [width, setWidth] = useState(window.innerWidth);
        const [height, setHeight] = useState(window.innerHeight);
        const [areas, setAreas] = useState([
          {
            type: "html",
            id: "h1",
            x: 10,
            y: 10,
            width: 100,
            height: 100,
            content: "<h1>Hello, World!</h1>",
          },
          {
            type: "html",
            id: "h2",
            x: 120,
            y: 10,
            width: 100,
            height: 100,
            content: "<h2>Hello, World!</h2>",
          },
        ]);

        useEffect(() => {
          window.addEventListener("resize", () => {
            setWidth(window.innerWidth);
            setHeight(window.innerHeight);
          });
        }, []);

        console.log(`Width: ${width}, Height: ${height}`);

        useEffect(() => {
          console.log("Component mounted");
        }, []);

        return h(
          "svg",
          {
            width,
            height,
            style: {
              position: "absolute",
              top: 0,
              left: 0,
            },
          },
          [
            h("defs", {}, []),

            ...areas
              .filter((area) => area.type === "html")
              .map((area) =>
                h(
                  "foreignObject",
                  {
                    key: area.id,
                    x: area.x,
                    y: area.y,
                    width: area.width,
                    height: area.height,
                    style: {
                      overflow: "hidden",
                    },
                  },
                  [
                    h("div", {
                      style: {
                        width: "100%",
                        height: "100%",
                        display: "flex",
                        justifyContent: "center",
                        alignItems: "center",
                      },
                      dangerouslySetInnerHTML: {
                        __html: area.content,
                      },
                    }),
                  ]
                )
              ),
          ]
        );
      }

      render(h(App), document.body);
    </script>
  </body>
</html>
